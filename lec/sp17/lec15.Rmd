---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.1'
      jupytext_version: 1.2.4
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

```{python deletable=TRUE, editable=TRUE}
from datascience import *
import numpy as np

import matplotlib.pyplot as plots
plots.style.use('fivethirtyeight')
# %matplotlib inline
```

<!-- #region {"deletable": true, "editable": true} -->
## Monty Hall
<!-- #endregion -->

```{python deletable=TRUE, editable=TRUE}
doors = make_array(1, 2, 3)
doors
```

```{python deletable=TRUE, editable=TRUE}
prizes = make_array('car', 'first goat', 'second goat')
prizes
```

```{python deletable=TRUE, editable=TRUE}
np.random.choice(prizes, 3, replace=False)
```

```{python deletable=TRUE, editable=TRUE}
def setup():
    """Return a random game of Let's Make a Deal."""
    return Table().with_columns(
        'Door', doors,
        'Prize', np.random.choice(prizes, 3, replace=False)
    )

a_game = setup()
a_game
```

```{python deletable=TRUE, editable=TRUE}
def behind(game, door):
    """Return the prize behind a door."""
    return game.where('Door', door).column('Prize').item(0)

for door in doors:
    print('Behind door number', door, 'is the', behind(a_game, door))
```

```{python deletable=TRUE, editable=TRUE}
def location(game, prize):
    """Return the door that hides a prize."""
    return game.where('Prize', prize).column('Door').item(0)

for prize in prizes:
    print('The', prize, 'is behind door number', location(a_game, prize))
```

```{python deletable=TRUE, editable=TRUE}
a_guess = np.random.choice(doors)
a_guess
```

```{python deletable=TRUE, editable=TRUE}
def expose(game, guess):
    """Return the door that Monty Hall opens to expose a goat."""
    guessed_prize = behind(game, guess)
    if guessed_prize == 'first goat':
        reveal = 'second goat'
    elif guessed_prize == 'second goat':
        reveal = 'first goat'
    else:
        reveal = np.random.choice(['first goat', 'second goat'])
    return location(game, reveal)

an_exposed_door = expose(a_game, a_guess)
print('The contestant picked door', a_guess, 'which hides the', behind(a_game, a_guess))
print('Monty Hall opens door', an_exposed_door, 'to expose the', behind(a_game, an_exposed_door))
```

```{python deletable=TRUE, editable=TRUE}
def other(game, guess, exposed):
    """Return the door that is not the guess or the exposed."""
    return (1 + 2 + 3) - guess - exposed

the_remaining_door = other(a_game, a_guess, an_exposed_door)
print('The remaining door', the_remaining_door, 'hides the', behind(a_game, the_remaining_door))
```

```{python deletable=TRUE, editable=TRUE}
trials = Table(['trial', 'guess', 'exposed', 'remaining'])
for i in np.arange(10000)+1:
    game = setup()
    guess = np.random.choice(doors)
    exposed = expose(game, guess)
    remaining = other(game, guess, exposed)
    trials.append([i, behind(game, guess), behind(game, exposed), behind(game, remaining)])
    
trials
```

```{python deletable=TRUE, editable=TRUE}
trials.group('guess')
```

```{python deletable=TRUE, editable=TRUE}
trials.group('exposed')
```

```{python deletable=TRUE, editable=TRUE}
trials.group('remaining')
```

```{python deletable=TRUE, editable=TRUE}
compare = trials.group('guess').join('guess', trials.group('remaining'), 'remaining')
compare.relabeled(0, 'Prize').relabeled(1, 'Guess Count').relabeled(2, 'Remaining Count').barh(0)
```

<!-- #region {"deletable": true, "editable": true} -->
## Probability
<!-- #endregion -->

<!-- #region {"deletable": true, "editable": true} -->
#### Tickets

Red Green Blue

What's the chance of GR when sampling two cards without replacement

RB RG BR BG GR GB

P(GR) = 1/6

P(one R and one G) = P(GR) + P(RG) = 1/6 + 1/6

<!-- #endregion -->
